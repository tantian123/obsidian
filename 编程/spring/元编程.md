将计算机程序作为数据处理 生成新的计算机程序的技术**使用代码生成代码的方式**
[元编程技术综述 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/399035868)

作用：


元编程分类：
宏  反射 元对象协议 切面 生成式 多阶段

宏：c和cpp
**反射**是指在运行时计算机程序可以访问，检测和修改它本身状态或行为的一种能力
反射的两个主要概念是**内省（introspection）**和**调整（intercession）**。内省是程序检查其自我表示的能力，而调整是程序修改其自我表示的能力。另一个区别是结构反射和行为反射之间的区别。结构反射是程序访问其结构表示的能力（例如，类、方法和字段），而行为反射是它能够访问其切面的动态表示（例如，变量赋值、对象创建、方法调用等）

**元对象协议**MOP
很多语言采用了 MOP 的模型，如 Python，Ruby，Groovy，Perl 等。C++ 和 Java 虽然语言本身没有提供 MOP，但是有很多的扩展实现 MOP

**面向切面编程（AOP）**[1] 是一种将交叉切割问题（crosscutting concerns）建模为一种称为**切面（aspects）**的模块化单元的方法
切面包含有关**附加行为（advice）**的信息，这些行为将按切面以及称为**连接点（join points）** 的程序位置添加到基础程序中，其中此额外行为将基于一些匹配标准（称为**切入点 pointcuts**）插入。将基本程序与纵向代码相结合，形成包含从各个切面交叉切割功能的最终代码（图 6）。此过程称为**编织（weave）**，可能在程序编译或执行期间进行。编译期进行编织的称为**静态 AOP**，运行期编织的称为**动态 AOP**。静态 AOP 的性能更好，因为它的运行时间开销较少，而动态 AOP 更灵活，允许在运行时动态插入或拔下切面。

AOP 的想法源于反射和 MOP，因此元编程与 AOP 之间有着密切的关系。特别是，AOP 支持元编程作为一种程序转换方法，采用基于模式匹配的方法来表达交叉切割问题。与算法转换相比，这可能限制表现力，但能够以更大的灵活性和抽象性处理涉及交叉切割问题的元编程任务，从而实现更简洁、更直接、更安全的实现。


AspectJ是 AOP 的第一个语言和 reference 实现，扩展 了 Java 语法

Meta-AspectJ（MAJ）[16] 是一个 Java 扩展，可定义生成 AspectJ 代码的模板



**产生式编程（Generative Programming）**是在给定特定需求规范的情况下，可以通过配置从基本的、可重用的实现组件按需自动生产高度定制和优化的中间或最终产品

例如 **模板 Templates**  **语法树转换 AST Transformation** **编译时反射 Compile-Time Reflection**
**类组合 Class Composition**



分为
 1编译前，即预处理阶段 源程序被处理 源代码中看不到元程序代码
 宏系统都可以被归类为预编译期求值系统
 2编译时
3运行时
