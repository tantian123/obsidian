

为什么需要协程，当前的应用大多数是IO密集的，即处理的任务都是与网络IO和内存IO有关的，
如果使用线程来处理的话，太重了，会频繁的进行上下文切换，同时还会存在多线程的资源竞争问题
如果使用进程的话，由于进程的内存空间是不共享的，还需要额外引入进程间通信的机制


**协程是处在用户态的线程**，怎么理解
协程的切换是在用户态的，不会陷入内核，因此协程切换的开销也是相当小的，协程的切换无非是改变几个寄存器的值。（协程拥有自己的寄存器上下文和栈）
而线程的切换涉及到操作系统的内核，内核会暂停线程的执行，将上下文保存在内存中，并将CPU分配给其他线程


有栈协程和无栈协程
**所谓的有栈，无栈并不是说这个协程运行的时候有没有栈，而是说协程之间是否存在调用栈**

相比于有栈协程直接切换栈帧的思路，无栈协程在不改变函数调用栈的情况下，采用类似生成器（generator）的思路实现了上下文切换。所以上下文切换的成本更小


为什么叫协程 即协作执行 而不是抢占式地 两个执行单元协作执行
底层原理就是切换了程序运行的栈指针而已，相当于上下文环境的切换
