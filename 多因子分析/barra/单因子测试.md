多因子模型分为Alpha模型和风险模型。
以Barra为代表的风险模型更多的用于投资组合的业绩归因

多因子框架基本的逻辑就很清楚了

- step1: 因子选择，去极值（三种方法：Zscore标准化、分位数标准化、MAD标准化）  
    
- step2: 中性化（行业中性化、市值中性化）  
    
- step3: 因子有效性检验（IC法、BARRA法）  
    
- step4: 相关性强的因子合成新的复合因子（等权法、历史收益率加权法、历史信息比例加权法、PCA）  
    
- step5: 因子加权进行股票选择

  

样本的选取 
测试样本范围：中证800指数成份股  
测试样本期间：2012-01-01至2019-01-13
**（1） 剔除选股日ST/PT的股票；**  
**（2） 剔除上市不满一年的股票；**  
**（3） 剔除选股日由于停牌等原因而无法买入的股票。**

数据的清洗

因子测试

多因子模型



宏观经济因子、基本面因子、统计面因子
（1）宏观经济因子，宏观经济因子通常只可观察的宏观经济序列数据，比如GDP、CPI、利率等。
但是宏观经济因子只有一个，股票却有3000个，这无疑会带来两个问题。首先，每一只股票的收益率都要和宏观经济因子做回归，这非常麻烦。第二，宏观经济指标滞后性明显，对股票收益率的预测效果并不显著。（研报的观点，个人觉得这个理论可以商榷）

（2）基本面因子，包括股票财务报表中的各种指标，以及各种K线指标也可以算作此类。

（3）统计面因子，个人理解，统计面因子主要是对因子做处理之后的新因子。比如说六个月动量，12个月之后的反转，或者可以从股票收益率协方差里面提取一些参数，作为统计面的因子。

一般而言，实际多因子模型中，用的最多的是基本面因子。



## **因子有效性的验证方法**

IC（信息系数）方法

## Barra方法  

Barra提供了一系列评价因子是否有效的方法：
1.单因子回归方程系数T检验的绝对值均值，通常该值大于2认为是比较理想的结果
2.单因子回归方程系数T检验绝对值均值大于2的占比，用于解释因子显著性的分布特征
3.利用回归出的因子收益率，计算因子的年化收益率
4.计算因子的年化收益率波动率
5.计算因子收益率/因子波动率
6.计算因子收益率与基准收益率（如沪深300）的相关性，相关性越低越好
7.因子的自稳定系数

![](https://picx.zhimg.com/v2-f387136ea4c1779d35a670b5f2f21c77_1440w.png)

其中vntv_{n}^{t} 表示股票n在第t天的WLS回归所采用的加权权重，即第一部分说的市值或者是残差。通常情况下，因子自稳定系数大于0.9算是比较不错的，小于0.8则认为因子并不具有一定的稳定性。

barra的多因子模型是怎么估计。
回到第一部分多因子最核心的公式上来：R=Xf+u
barra风险估计分成两个部分：第一是因子收益率的协方差矩阵，第二是每只股票的特异收益率

1barra模型主要是为了去预测市场的风险或者给定的组合风险
2个人认为，barra的风险模型理论上可以用来选择股票的，但是全市场三千多只股票，如果单纯的去解一个均值-方差模型这样的一个凸优化问题，显然会带来很大的偏差。所以barra模型，我认为可以在得到了想要的30、50只股票之后，计算应当以什么样的比例投资于这三五十只股票。
3那些因子把所有风格和市场风险都对冲掉，然后就针对这个特异性收益率构建均值回归策略，比如之前 mu 大的你就做空，mu 小的你就做多（当然国内做空比较难，那你就试试纯多头组合），应该会有不错的效果
4虽然是简单模型但其实也有很多种做法，比如如何ensemble就千差完别，以及我觉得比较关键的是如何validation
**在多因子模型分析中，我们需要强调一下基础数据和对应的分析回测平台的重要性。**如果你没有一个完整的股票数据库以及对应的因子库和分析工具，可以说你连谈多因子的资格都没有  
我们在讲风险模型精度高不高，组合优化质量好不好的时候那个背后的基础数据质量才是最关键的，如果不能了解清楚每个因子的数据特点，覆盖度有多少，原始数据用正态调整会不会偏，填充值用中位数还是均值，填充太多又有什么影响  

Barra模型的构建方法

使用多因子模型估计协方差矩阵需要估计因子暴露以及因子收益率。**在学术以及实务中，估计因子暴露及因子收益主要有两种方法：一种是****时间序列回归****，通过个股收益率序列对因子收益回归，估计因子暴露；一种是****横截面回归****，在每一期通过个股收益率对因子暴露回归，估计因子收益率。**

在时间序列回归的估计窗口内，因子暴露是固定的，而因子收益率是变化的。因此，这样估计得到的因子暴露对于市场的变化反应较慢。而在横截面回归中，因子暴露会根据公司特征的变化及时变化，每一期的因子暴露和因子收益率都是变化的，从而能够及时的反映市场变化情况。

对于基本面因子模型，两种方法都具有一定的适用性，时间序列回归方法在学术论文中比较常见，学术界的做法偏向于“解释”收益率；而业界中使用较多的则是横截面回归，更多是从因子暴露出发，用因子数值的标准化得分作为因子暴露的观察值，但是这种做法只适合财务因子、技术因子、情绪因子等，对于一些宏观因子，仍然要对个股进行时间序列回归来估算因子暴露。业界做法中个股收益率是和期初的因子暴露对应的，带有“预测”收益率的性质，实用性更强
**.1 时间序列回归**

**时间序列回归：**首先需要确定因子收益率。即用股票超额收益率和风险因子超额收益率进行回归，计算公式为：

![](https://xqimg.imedao.com/17d99a10c41143fad0e9ce0c.jpeg!800.jpg)

 **横截面回归：**首先需要确定因子期初暴露，定义出 ，然后利用一系列横截面数据回归得出公共因子的收益率，进而求出这些公共因子的协方差矩阵，最终运用这些公共因子的协方差矩阵并利用相关的计算公式对投资组合的收益和风险状况进行分析  
  
**Barra模型的优点：**

Barra模型常被一些学者和投资机构用来对证券的收益和风险进行研究，它的主要作用在于能将市场许多的信息进行综合得出对于证券收益会产生影响的公共因子，然后运用这些公共因子进行投资相关的归因分析和风险预测。另外，使用Barra模型还可以大大简化工作量，假设估计一项资产与另一资产的协方差，若使用历史报酬估计协方差阵需要输入N*(N+1)/2个参数(N指资产的种类)；而利用barra模型则能够大大简化这项计算工程。

总的来说，**利用多因子模型而非收益率的时间序列估计方差协方差矩阵的优势已较为人所熟知。****其一，此种方法降低了估计协方差矩阵的所需要的时间跨度，其二，减小了矩阵的不稳定性，其三，增强了方差矩阵的预测性。**

**Barra模型的缺点：**

由于Barra模型是以公共因子为基础进行后续研究的，会涉及大量数据清洗和加工，因而建立一个Barra模型的工作量是巨大的，它的参数估计和校准比较难以高效进行

  
