锁的粒度
锁的类型 锁算法




锁的粒度：行锁和表锁

表锁下有：意向共享锁 意向排他锁 自增锁AUTO-INC
共享是select for update, select for share mode
autoinc是自增字段的锁 保证了自增列的有序递增

行锁下有：
记录锁record locks 间隙锁gap locks 临键锁next-key locks

记录锁 锁定那行数据的索引
间隙锁 阻止其他事务插入到间隙中
临键锁 是记录锁和间隙锁的组合 除了锁住对应的索引，还会锁定一个区间，这样其他事务就无法在这个区间内新增数据，这也解决了幻读的问题


如果判断一条sql加上了什么锁
1.根据隔离级别 2.有无索引 索引类型 主键还是二级索引 3.等值查询还是范围查询 范围查询就有临键锁